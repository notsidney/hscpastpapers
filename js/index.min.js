var jsonData,courseIndex,yearIndex,docLink,urlCourse,urlYear,urlDoc,urlCourse2,urlYear2,urlDoc2,selectedCourse,selectedYear,selectedDoc,timestamp,version="1.10.2";function urlParam(e){var o=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null===o?"":decodeURIComponent(o[1])}function urlNotFound(e){var r=$("#not-found-modal-table"),o=$("#not-found-modal-type");function a(e,o,a){a?r.append('<tr class="error"><td>'+e+"</td><td>"+o+"</td></tr>"):r.append("<tr><td>"+e+"</td><td>"+o+"</td></tr>")}switch(r.html(""),o.html(""),o.html(e),e){case"Course":a("Course",urlCourse,!0);break;case"Year":a("Course",urlCourse,!1),a("Year",urlYear,!0);break;case"Doc":a("Course",urlCourse,!1),a("Year",urlYear,!1),a("Doc",urlDoc,!0);break;case"Course2":a("Course2",urlCourse2,!0);break;case"Year2":a("Course2",urlCourse2,!1),a("Year2",urlYear2,!0);break;case"Doc2":a("Course2",urlCourse2,!1),a("Year2",urlYear2,!1),a("Doc2",urlDoc2,!0)}$("#not-found-modal").modal({duration:200,onApprove:function(){urlDoc=urlYear=urlCourse="",setTimeout(function(){$("#"+e.toLowerCase()+"-dropdown").dropdown("show")},200)}}).modal("show")}function openPDF(e,o){$("#iframe");"right"===o&&$("#iframe-split-right"),$("#loader").removeClass("active");var a=/[^\/]+$/.exec(e);iframeMsg(o,"<b>"+(a=a[0].replace("?MOD=AJPERES",""))+'</b><br><a href="'+e+'" target="_blank"class="ui huge primary compact button"><i class="external icon"></i>Open in a new tab</a>'),window.open(e,"_blank")}function iframeMsg(e,o){var a=$("#iframe");"right"===e&&(a=$("#iframe-split-right")),a.contents().find("head").html('<link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css"><style>.msg-body {background-color: #262626;min-width: auto;padding: 20px}.container {align-items: center;display: flex;height: 100%;justify-content: center}.message {background: 0 0;color: rgba(255,255,255,.5);cursor: default;font-size: 24px;line-height: 1.2em;text-align: center;user-select: none}.message .icon:not(.big) {margin: 0 .2em 0 .3em}.message .big.icon {margin-bottom: .25em}.ui.button {border-radius: 10px;line-height: 1.2em;margin-top: 1em;}.divider {background-color: rgba(255,255,255,.2);height: 80%;left: 0;position: absolute;top: 10%;width: 1px}.message p.copyright {font-size: 16px;margin-top: 4em;max-width: 560px}.message p.copyright a {color: #fff;}.message p.copyright a:hover,.message p.copyright a:active,.message p.copyright a:focus {text-decoration: underline;}</style>'),a.contents().find("body").addClass("msg-body").html('<div class="container"><div class="message">'+o+'<p class="copyright">Past papers are no longer directly viewable on this web app to comply with <a target="_blank" href="http://educationstandards.nsw.edu.au/wps/portal/nesa/mini-footer/copyright">NESA Copyright Policy</a>. You can read about the changes made <a target="_blank" href="https://github.com/notseenee/hscpastpapers/blob/master/copyright-changes.md">here</a>.</p></div></div>'),"right"===e&&a.contents().find("body").append('<div class="divider"></div>')}function populateDropdown(e,o,a,r,t){if("object"==typeof e){var n=[];for(i=0;i<e.length;i++)n.push(e[i][o]);if(n.sort(),r&&n.reverse(),$(a).empty(),0==n.length&&t)$(a).append('<div class="item" style="display:none"></div><div class="no-item-msg">No documents available.<br><a target="_blank" href="'+t+'">View exam pack on NESA website <i class="external icon"></i></a></div>');else for(j=0;j<n.length;j++)$(a).append('<div class="item" data-value"1">'+n[j]+"</div>")}else console.error("Input JSON not an object: "+e),alert("Error:\n\nInput JSON not an object: "+e)}function loadJSON(e,o,a,r){if("undefined"!=typeof Storage){var t=!0,n=localStorage.getItem("timestamp");if(null!==n){(new Date).getTime()-new Date(n).getTime()<6048e5&&(t=!1)}else{var s=new Date;localStorage.setItem("timestamp",s),console.log("Local storage - set new download date: "+s)}var d=localStorage.getItem(o);if(null!==d&&!1===t){console.log("Serving from LocalStorage: "+o);try{r(JSON.parse(d))}catch(e){var l="Failed to parse "+o+" JSON from cache.\n"+e;console.error(l),alert(l+"\n\nPress OK to reload."),localStorage.removeItem(o),location.reload()}}else console.log("Downloading: "+o),ajaxJSON(e,o,a,function(e){console.log("Downloaded and cached: "+o),localStorage.setItem(o,JSON.stringify(e)),r(e)})}else console.log("LocalStorage not available: "+o),ajaxJSON(e,o,a,function(e){r(e)})}function ajaxJSON(e,o,a,r){null!==a?$.ajax({dataType:"json",url:e,xhr:a,success:r}):$.ajax({dataType:"json",url:e,success:r})}function dataProgress(){console.log("Downloading data...");var e=new window.XMLHttpRequest;return e.addEventListener("progress",function(e){var o=Math.floor(e.loaded/1217736*100);$("#loadingbar").progress({percent:o}),$("#loadingpercent").html(o+"%")},!1),e}function dataReceived(e){console.log("Received data"),populateDropdown(jsonData=e,"course_name","#course-menu",!1),populateDropdown(jsonData,"course_name","#course-menu2",!1),$("#loadingpercent").html("100%"),$("#loadingbar").progress({percent:100}).delay(500).fadeOut(200),$("body").removeClass("loading"),iframeMsg("left",'<p>Select a<i class="student icon left spaced"></i>Course,<i class="history icon left spaced"></i>Year, and<i class="file pdf outline icon left spaced"></i>Document above</p>'),iframeMsg("right",'<p>Select a<i class="student icon left spaced"></i>Course,<i class="history icon left spaced"></i>Year, and<i class="file pdf outline icon left spaced"></i>Document above</p>'),$("body").css("background-color","#fff"),$("#course-dropdown").removeClass("disabled").dropdown("show").dropdown({selectOnKeydown:!1}),$("#course-dropdown2").removeClass("disabled").dropdown({selectOnKeydown:!1}),urlCourse&&($("#course-dropdown").dropdown("set selected",urlCourse).dropdown("hide"),$("#course-dropdown").dropdown("get value")||urlNotFound("Course")),urlCourse2&&($("#course-dropdown2").dropdown("set selected",urlCourse2).dropdown("hide"),$("#course-dropdown2").dropdown("get value")||urlNotFound("Course2"))}function showTimestamp(e){console.log("Received meta"),timestamp=new Date(e.timestamp),$("#timestamp").html(timestamp.toLocaleDateString())}$("#course-input").change(function(){for(selectedCourse=$("#course-input")[0].value,params.course=selectedCourse,$("#year-dropdown").addClass("loading").removeClass("disabled"),k=0;k<jsonData.length;k++)if(jsonData[k].course_name.toLowerCase()==selectedCourse){courseIndex=k;break}populateDropdown(jsonData[courseIndex].packs,"year","#year-menu",!0),$("#year-dropdown").removeClass("loading").dropdown("restore defaults").dropdown("show").dropdown({selectOnKeydown:!1}),urlYear&&($("#year-dropdown").dropdown("set selected",urlYear).dropdown("hide"),$("#year-dropdown").dropdown("get value")||urlNotFound("Year")),history.pushState(null,"","?"+$.param(params))}),$("#year-input").change(function(){if(""!==$(this)[0].value){for(selectedYear=$("#year-input")[0].value,params.year=selectedYear,$("#doc-dropdown").addClass("loading").removeClass("disabled"),l=0;l<jsonData[courseIndex].packs.length;l++)if(jsonData[courseIndex].packs[l].year==selectedYear){yearIndex=l;break}populateDropdown(jsonData[courseIndex].packs[yearIndex].docs,"doc_name","#doc-menu",!1,jsonData[courseIndex].packs[yearIndex].link),$("#doc-dropdown").removeClass("loading").dropdown("restore defaults").dropdown("show"),urlDoc&&($("#doc-dropdown").dropdown("set selected",urlDoc).dropdown("hide"),$("#doc-dropdown").dropdown("get value")||urlNotFound("Doc")),$("#actions-dropdown").removeClass("disabled").dropdown({action:"nothing"}),$(".button-exampack").removeClass("disabled").attr("href",jsonData[courseIndex].packs[yearIndex].link),history.pushState(null,"","?"+$.param(params))}}),$("#doc-input").change(function(){if(""!=$(this)[0].value){for(selectedDoc=$("#doc-input")[0].value.replace("&amp;","&"),params.doc=selectedDoc,m=0;m<jsonData[courseIndex].packs[yearIndex].docs.length;m++)if(jsonData[courseIndex].packs[yearIndex].docs[m].doc_name.toLowerCase()==selectedDoc){docLink=(docLink=jsonData[courseIndex].packs[yearIndex].docs[m].doc_link).replace("http","https");break}$("#loader").addClass("active"),openPDF(docLink,"left"),$(".button-download").removeClass("disabled").attr("href",docLink),$(".button-link").removeClass("disabled").removeAttr("disabled"),history.pushState(null,"","?"+$.param(params)),updateTabTitle()}}),$("#clear-cache").click(function(){localStorage.clear(),location.reload()}),$(document).ready(function(){$("#nojquery").hide(),$("#about-modal").modal({duration:200}),$("#version").html(version),$("#currentYear").html((new Date).getFullYear().toString().substr(-2)),urlCourse=urlParam("course"),urlYear=urlParam("year"),urlDoc=urlParam("doc"),urlCourse2=urlParam("course2"),urlYear2=urlParam("year2"),urlDoc2=urlParam("doc2"),"about"==urlParam("open")&&$("#about-modal").modal("show"),params={mode:"normal"},$("#more-dropdown").dropdown({action:"nothing"}),loadJSON("data/data.json","data",dataProgress,dataReceived),loadJSON("data/meta.json","meta",null,showTimestamp)}),$(".button-link").click(function(){prompt("Copy link below:",docLink)}),$(".button-about").click(function(){$("#about-modal").modal("show")}),$("#close-modal").click(function(){"about"==urlParam("open")&&history.pushState(null,"","?")}),$("#iframe").on("load",function(){$("#loader").removeClass("active")});var courseIndex2,yearIndex2,docLink2,selectedCourse2,selectedYear2,selectedDoc2,params,idleTime=0,dimmable=!1;function timerIncrement(){5<=(idleTime+=5)&&!0===dimmable&&$("body").addClass("idle")}function resetTimer(){idleTime=-5,$("body").removeClass("idle")}function updateTabTitle(){"Document"!=$("#doc-dropdown .text.overflow").html()?(document.title=$("#year-dropdown .text").html()+" "+$("#course-dropdown .text").html()+" "+$("#doc-dropdown .text.overflow").html(),$("body").hasClass("split")&&"Document"!=$("#doc-dropdown2 .text.overflow").html()&&(document.title+=" | "+$("#year-dropdown2 .text").html()+" "+$("#course-dropdown2 .text").html()+" "+$("#doc-dropdown2 .text.overflow").html())):document.title="HSCPastPapers.com"}$(document).ready(function(){setInterval(timerIncrement,5e3);$(this).mousemove(function(e){resetTimer()}),$(this).mousedown(function(e){resetTimer()}),$(this).mouseup(function(e){resetTimer()}),$(this).keypress(function(e){resetTimer()}),this.addEventListener("touchstart",function(e){resetTimer()},!1),this.addEventListener("touchmove",function(e){resetTimer()},!1),this.addEventListener("touchend",function(e){resetTimer()},!1)}),$(document).ready(function(){"split"==urlParam("mode")&&($("body").addClass("split"),$("#course-dropdown2").dropdown("show"),params.mode="split")}),$(".button-split").click(function(){$("body").addClass("split"),selectedCourse2||selectedYear2||selectedDoc2||$("#course-dropdown2").dropdown("show"),params.mode="split",history.pushState(null,"","?"+$.param(params)),updateTabTitle()}),$(".button-splitexit").click(function(){$("body").removeClass("split"),params.mode="normal",history.pushState(null,"","?"+$.param(params)),updateTabTitle()}),$("#course-input2").change(function(){for(selectedCourse2=$("#course-input2")[0].value,params.course2=selectedCourse2,$("#year-dropdown2").addClass("loading").removeClass("disabled"),k=0;k<jsonData.length;k++)if(jsonData[k].course_name.toLowerCase()==selectedCourse2){courseIndex2=k;break}populateDropdown(jsonData[courseIndex2].packs,"year","#year-menu2",!0),$("#year-dropdown2").removeClass("loading").dropdown("restore defaults").dropdown("show").dropdown({selectOnKeydown:!1}),urlYear2&&($("#year-dropdown2").dropdown("set selected",urlYear2).dropdown("hide"),$("#year-dropdown2").dropdown("get value")||urlNotFound("Year2")),history.pushState(null,"","?"+$.param(params))}),$("#year-input2").change(function(){if(""!==$(this)[0].value){for(selectedYear2=$("#year-input2")[0].value,params.year2=selectedYear2,$("#doc-dropdown2").addClass("loading").removeClass("disabled"),l=0;l<jsonData[courseIndex2].packs.length;l++)if(jsonData[courseIndex2].packs[l].year==selectedYear2){yearIndex2=l;break}populateDropdown(jsonData[courseIndex2].packs[yearIndex2].docs,"doc_name","#doc-menu2",!1),$("#doc-dropdown2").removeClass("loading").dropdown("restore defaults").dropdown("show"),urlDoc2&&($("#doc-dropdown2").dropdown("set selected",urlDoc2).dropdown("hide"),$("#doc-dropdown2").dropdown("get value")||urlNotFound("Doc2")),history.pushState(null,"","?"+$.param(params))}}),$("#doc-input2").change(function(){if(""!==$(this)[0].value){for(selectedDoc2=$("#doc-input2")[0].value,params.doc2=selectedDoc2,m=0;m<jsonData[courseIndex2].packs[yearIndex2].docs.length;m++)if(jsonData[courseIndex2].packs[yearIndex2].docs[m].doc_name.toLowerCase()==selectedDoc2){docLink2=(docLink2=jsonData[courseIndex2].packs[yearIndex2].docs[m].doc_link).replace("http","https");break}openPDF(docLink2,"right"),$("#loader").addClass("active"),history.pushState(null,"","?"+$.param(params)),updateTabTitle()}}),$("#iframe-split-right").on("load",function(){$("#loader").removeClass("active")});
